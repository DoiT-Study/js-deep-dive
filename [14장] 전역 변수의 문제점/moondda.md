전역 변수를 반드시 사용해야 하는 것이 아니라면 지역 변수를 사용하자

14.1 변수의 생명 주기
14.1.1 지역 변수의 생명주기

변수는 생명 주기가 있다

선언에 의해 생성되고 할당을 통해 값을 갖고, 언젠가는 소멸한다.

젼역 변수의 생명주기:
애플리케이션의 생명 주기

지역 변수의 생명 주기:
지역변수가 선언 된 함수의 생명 주기

4장에서 변수 선언은 선언문이 어디에 있든 상관 없이 가장 먼저 실행된다. 변수 선언은 런타임에 실행되는 것이 아니라 런타임 이전 단계에서 자바스크립트 엔진에 의해 먼저 실행된다 (변수 호이스팅 설명 중)

엄밀히 말하면 저 부분은 전역 변수에 한해서의 이야기!!

지역변수는 해당 함수가 호출된 직후, 함수 몸체 코드가 하나씩 실행되기 이전에 자바스크립트 엔진에 의해 먼저 실행된다.

호이스팅은 스코프를 단위로 동작한다.

전역 스코프
Global scope
코드 어디에서든지 참조 가능

지역 스코프
Local scope / Function-level scope
함수 코드 블록이 만든 스코프로, 함수 자신과 하위 함수에서만 참조할 수 있다.

14.1.2 전역 변수의 생명 주기

전역 코드는 실행이 시작하는 특별할 진입점(ex.함수 호출) 코드가 로드되자마자 곧바로 해석되고 실행된다.

함수: 함수 몸체의 마지막 문 또는 반환문이 실행되면 종료
전역: 반환문 사용 불가 -> 마지막 문까지 실행이 되어 더이상 실행할 문이 없을때 종료

var키워드로 선언한 전역 변수는 전역 객체의 프로퍼티가 된다.
-> 전역 변수의 생명 주기 == 전역 객체의 생명주기

전역 객체란?

14.2 전역 변수의 문제점

1. 암묵적 결합
   모든 코드에서 참조가 가능하고 변경이 가능하다.
   변수의 유효 범위가 클 수록 코드의 가독성이 나빠지고, 변경 위험성이 높아지므로 최대한 지양

2. 긴 생명 주기
   메모리 리소스 소비 up
   전역 변수의 상태를 변경하는 시간, 기회 up -> 오류 발생 활률 up
   var 키워드는 변수의 중복 선언 허용 -> 의도치 않은 재할당

3. 스코프 체인 상에서 종잠에 존재
   변수를 검색할 때 전역 변수가 가장 마지막에 검색된다 -> 검색 속도가 가장 느리다
   하지만 그닥 속도차이가 크지는 않다고 한다

스코프체인이란??

- 유효 범위를 나타내는 스코프가 scope 프로퍼티로 각 함수 객체 내에서 연결리스트 형식으로 관리되는데,
- 이 스코프 간의 상하관계를 스코프 체인이라고 한다.

좀 더 쉽게 이해하기 위해선, 실행 컨텍스트를 알아야한다.

1. 네임스페이스 오염
   파일이 분리되어있어도 하나의 전역 스코프 공유
   다른 파일에서 동일한 이름의 전역 변수나 전역 함수가 여러개라면? 찾아보자

   14.3 전역 변수의 사용을 억제하는 방법

변수의 스코프는 좁을 수록 좋다

1. 즉시 실행 함수

괄호를 치면 됨!! 205쪽 참고

단 한번만 호출(실행)된다

2. 네임스페이스 객체

네임스페이스란??

전역변수처럼 사용하고 싶은 변수를 프로퍼티로 추가하는 방법

네임스페이스를 분리해서 식별자 충돌 방지는 되지만, 이마저도 전역 변수에 해당되므로 그닥 유용하지 않음

14.3.3 모듈 패턴

클로저

14.3.4. ES6 모듈
